<!DOCTYPE html>
<html class="no-js" lang="en" ng-app = "rtcVideo">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Applinic video</title>
    <meta name="description" content="">
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <!--<link rel="stylesheet" href="/assets/css/font-awesome.min.css">-->
    <link type="style/css" rel="stylesheet" href="/assets/css/video.css">
    <link rel="stylesheet" href="/assets/css/normalize.css">
    <link rel="stylesheet" href="/assets/css/my-edit.css">
     <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <!--<link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">-->

 <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/assets/css/now-ui-kit.css" rel="stylesheet" />

 <style type="text/css">
    body {
        font-family: 'Open Sans', sans-serif;
     }
     .calender-header {
    background-color:#7dbb00;
    color: #fff;    
    padding: 5px 5px;
    text-align: center;
}

a {
    color:#333 !important;
}

.calender-header i {
    width: 20%;
    cursor: pointer;
}

.calender-header i,.calender-header span {
    font-size: 24px;
    display: inline-block;
}

.calender-header > span {
    width: 55%;
}

.week,.indays {
    text-align: center;
}

span.day {  
    display: inline-block;
    padding: 5px;
    width: 12.5%;
    text-align: center;
    font-size: 16px;
    margin: 20px 0px 10px;
}

span.dates {
    margin-right: 5px;
    display: inline-block;
    padding: 5px;
    width: 13%;
    text-align: center;
    font-size: 14px;
    margin: 20px 0px;
    border-bottom: 1px solid grey;
    box-shadow: 1px 2px 3px grey;
    font-weight: bold;
}

.different-month {
    color:#C0C0C0;
    font-weight: normal!important;
}

textarea{
    padding:5px;
}


.today {
    background:#ccc;
    color:#fff;
}
            
.different-month {
    color:#C0C0C0;
}
            
.selected {
    background:#7dbb00;
    color:white;
}

.notAvail {
    text-decoration: line-through;
    color:red;
}

.updateInfo {
    color: #333;
    float: right;
}

.moved {
  transform: translate(10px); /* Equal to translateX(10px) */
  background-color: pink;
}


.card-footer{
    font-size:.8em;
    padding: 5px;
    text-transform: uppercase;
    font-weight: bold;
}

 </style>

<script src="/assets/js/vendor/jquery-library.js"></script>
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--<script type="text/javascript" src="/assets/js/source.js"></script>-->
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="/assets/js/adapter.js"></script>
    <script type="text/javascript" src="/assets/js/rtcClient.js"></script>
    <!--<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js">
    </script>-->
    <script type="text/javascript" src="/assets/js/angular-source.js"></script>
    <script src="/assets/js/ngresource.js"></script>
    
     <script src="/assets/js/moment.min.js"></script>  
    <script src="/assets/js/angular-moment.min.js"></script>
    <script type="text/javascript" src="/assets/js/angularVideo.js"></script>
        
</head>
<body style="overflow-x: hidden;">
    <main class="container-fluid"  style="margin: 0;padding: 0" ng-cloak>     


        <header  style="margin-bottom: 3px;background-color:#fff; box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.15); padding: 10px 30px" ng-controller="LocalStreamController as localStream" class="row">
            <div class="col-sm-12 col-md-5 col-lg-5 p-1">
                 <a href="" ng-click="goToDashbaord()" class="btn btn-neutral "><i class="fa fa-arrow-left"></i> Back to dashboard</a>&nbsp;&nbsp;&nbsp;
                 <span ng-cloak style="font-size: 10px">{{localStream.getControlId('<%= person.controlId %>')}}</span>
                <!--Appear as: <input ng-model="localStream.name" class="form-control" style="width: 50%;display: inline-block;"/>-->
                <a href ng-click="localStream.toggleCam()" class="btn btn-danger" style="color:#fff !important;float: right;">{{ (localStream.cameraIsOn === true) ? 'Streaming... ( stop / disconnect )' : localStream.cameraStatus }}</a>

            </div>
            <div  class="col-sm-12 col-md-7 col-lg-7">
                <div style="position: relative;">
                    <!--<a href=""><i class="fa fa-camera" ng-click="streamControl()"> videos</i></a>&nbsp;&nbsp;-->
                    <select ng-model="invite.type" class="form-control" style="width: 50%;display: inline-block;">
                        <option value="" selected="selected" disabled="disabled"><i class="fa fa-user text-danger"></i> Invite</option>
                        <option value="Doctor"><i class="fa fa-user"></i> invite a Doctor</option>
                        <option value="Patient"><i class="fa fa-user"></i> invite a Patient</option>
                    </select>
                    <div style="width: 50%;position: absolute;top:40px;left: 0px;background-color: #fff;z-index: 999;padding: 5px" class="shadow" ng-if="findInvitee">
                        <div style="text-align: right;">
                            <i class="fa fa-times" style="padding: 5px;cursor: pointer;" ng-click="closeInvite()"></i>
                        </div>
                        <div>
                            <input type="text" name="" ng-model="invite.name" placeholder="{{inviteInfo}}" class="form-control" style="width: 80%;display: inline-block;">
                            <button class="btn btn-simple" ng-click="getInvitee()">Go</button>
                        </div>
                        <div style="max-height: 400px;overflow-y: auto;">                        
                            <div ng-repeat="invitee in inviteeList" style="padding-top: 10px" ng-if="userId !== invitee.user_id">
                                <div ng-if="invite.type === 'Doctor'" >
                                    <img src="{{invitee.profile_pic_url}}" style="width: 42px; height: 42px;float: left;">
                                    <article style="display: inline-block;padding-left: 10px">
                                        <strong style="display: block;margin-top: -5px" class="ellipsis"><small>{{invitee.name}}</small></strong>
                                        <span style="display: block;margin-top: -5px" class="ellipsis"><small>{{invitee.specialty}}</small></span>
                                        <span style="display: block;margin-top: -5px" class="ellipsis"><small>{{invitee.work_place}} {{invitee.address}} {{invitee.city}}</small></span>
                                    </article>
                                    <a  href="" style="padding: 3px 5px;font-size: 14px;float: right;margin-top:20px" ng-click="sendInvitation(invitee.user_id)">{{(deliveryMsg) ? deliveryMsg : 'invite'}}</a>
                                    <span ng-if="invitee.presence === true" class="online" style="margin-top: 5px;margin-right: -30px; float: right;display: inline-block;width: 10px;height: 10px;border-radius: 10px;background-color: green"></span><span ng-if="invitee.presence !== true" class="online" style="background-color: grey;margin-top: 5px;margin-right: -30px;float: right;display: inline-block;width: 10px;height: 10px;border-radius: 10px;background-color: #ccc"></span>
                                </div>
                                 <div ng-if="invite.type === 'Patient'" >
                                    <img src="{{invitee.profile_pic_url}}" style="width: 42px; height: 42px;float: left;">
                                    <article style="display: inline-block;padding-left: 10px">
                                        <strong style="display: block;margin-top: -2px" class="ellipsis"><small>{{invitee.firstname}}</small></strong>                                     
                                        <span style="display: block;margin-top: -5px" class="ellipsis"><small>{{invitee.address}} {{invitee.city}} {{invitee.country}}</small></span>
                                    </article>
                                    <a  href="" style="padding: 3px 5px;font-size: 14px;float: right;margin-top:20px" ng-click="sendInvitation(invitee.user_id)">{{(deliveryMsg) ? deliveryMsg : 'invite'}}</a>
                                    <span ng-if="invitee.presence === true" class="online" style="margin-top: 5px;margin-right: -30px; float: right;display: inline-block;width: 10px;height: 10px;border-radius: 10px;background-color: green"></span><span ng-if="invitee.presence !== true" class="online" style="background-color: grey;margin-top: 5px;margin-right: -30px;float: right;display: inline-block;width: 10px;height: 10px;border-radius: 10px;background-color: #ccc"></span>
                                </div>
                            </div>
                            <div style="text-align: center;padding-top: 40px" ng-if="loading">
                                <i class="fa fa-spinner fa-pulse fa-1x fa-fw" style="color:orange" ></i>
                            </div>
                        </div>
                    </div>                  
                    <p class="text-danger p-2 mt-2" style="display: inline-block;float: right; font-size: .8em; border: 1px solid #f2f2f2; border-radius: 50px;">{{(connectionStatus === true) ? message : "Waiting for partner..."}}</p>
                </div>                
            </div> 
        </header>        
        <section class="row" ng-controller='RemoteStreamsController as rtc'>
             <div class="col-sm-12 col-md-3 col-lg-3 pull-left card pt-1" style="height:100%; display: block;">
                    <div class="col-md-12" style="height: 280px">
                    <div class="card-header bg-primary p-1">
                        <b class="pb-0 pt-1 m-0" style="color:#fff; font-size:1em;">Available streams</b>
                        <div ng-repeat="stream in rtc.remoteStreams" ng-class="{'selected' : stream.isPlaying}">       </div>             
                            <span>{{stream.name}}</span> &nbsp;&nbsp;
                            <button ng-click="rtc.view(stream)" class="btn btn-success" style="padding: 5px 10px;font-size: 12px">{{(stream.isPlaying === false) ? 'view' : 'hide'}}</button>
                        </div>
                    </div>

                    <div class="col-md-12"  style="height: 285px">
                    <div class="card-header bg-info p-1">
                    <b class="pb-0 pt-1 m-0" style="color:#fff; font-size:1em;">Management details</b></div>
                    <div ng-repeat="j in rtc.prescriptions" style="max-height: 300px;overflow-y: auto;border-bottom: 1px solid #000">
                       <b style="display: inline-block;padding-top: 10px">{{j.type}}</b>
                       <table class="table table-striped table-responsive">
                           <thead>
                               <th><small></small></th>
                               <th><small>Name</small></th>
                               <th><small>Dosage</small></th>
                               <th><small>Frequency</small></th>
                               <th><small>Duration</small></th>
                           </thead>
                           <tbody ng-repeat="drug in j.drugList">
                               <td>{{drug.sn}}</td>
                               <td>{{drug.drug_name}}</td>
                               <td>{{drug.dosage}}</td>
                               <td>{{drug.frequency}}</td>
                               <td>{{drug.duration}}</td>
                           </tbody>
                       </table>
                       <div>
                            <b>{{j.center.name}}</b>
                            <address><span>{{j.center.address}}</span> <span>{{j.center.city}} </span> 
                            <span>{{j.center.country}}</span>
                            <span style="display: block;">{{j.center.phone}}</span>
                            </address>
                           
                        </div>
                    </div>
                    <div ng-repeat="test in rtc.investigations" style="max-height: 300px;overflow-y: auto;border-bottom: 1px solid #000">
                        <b style="display: inline-block;padding-top: 10px">{{test.type}}</b>
                        <ol>
                            <li ng-repeat="item in test.testList">
                                {{item.name}}
                            </li>
                        </ol>
                        <div>
                            <b>{{test.center.name}}</b>
                            <address><span>{{test.center.address}}</span> <span>{{test.center.city}} </span> 
                            <span>{{test.center.country}}</span>
                            <span style="display: block;">{{test.center.phone}}</span>
                            </address>
                           
                        </div>
                    </div>
                <span style="visibility: hidden;">video connection channel : &nbsp;{{rtc.siteLink('<%= person.controlId %>')}}</span>
            </div> 
</div>

           <div class="col-sm-12 col-md-6 col-lg-6" style="margin-top:10px;padding-left: 30px">           
                <div class="col-md-8">
                    <div class="card p-0">
                        
                        <video id="localVideo" autoplay="true" muted="muted" 
                        style="width:100%;height:300px;"></video>

                        <div class="card-footer p-1"><p style="text-align: center; color:#333;">Name Here</p></div>
                    </div>  

  </div> 


 <div class="col-md-12">
 <div class="row">
     <div class="col-md-4 col-sm-12  pl-1 pr-0">
             <div class="card" style="display: inline-block;margin: 8px; min-height:150px;">
                   <div class="card-body" id="remoteVideosContainer" style="height:130px;" ></div>
                   <div class="card-footer">Name here</div>
                    </div>
     </div>

      <div class="col-md-4 col-sm-12 pl-1 pr-0">
             <div class="card" style="display: inline-block;margin: 8px; min-height:150px;">
                   <div class="card-body" id="remoteVideosContainer" style="height:130px;" ></div>
                   <div class="card-footer">Name here</div>
                    </div>
     </div>


      <div class="col-md-4 col-sm-12  pl-1 pr-0">
             <div class="card" style="display: inline-block;margin: 8px; min-height:150px;">
                   <div class="card-body" id="remoteVideosContainer" style="height:130px;" ></div>
                   <div class="card-footer">Name here</div>
                    </div>
     </div>
     </div>
 </div>


                           
            </div>

                     
             
            <!--<button ng-click="rtc.call(stream)"><a>Call</a></button>-->



            <!--<div ng-repeat="stream in rtc.remoteStreams" ng-class="{'selected' : stream.isPlaying}" >
                        <h5>{{stream.name}}</h5>
                        <button ng-click="rtc.view(stream)" class="btn btn-success">View</button>
                        <button ng-click="rtc.call(stream)"><a>Call</a></button>
                    </div>-->



            <div style="border-left:2px solid #f2f2f2;padding-left: 10px;max-height: 800px;overflow-y: auto" class="col-sm-12 col-md-3 col-lg-3" ng-controller="VideoDiagnosisController">
                <!-- ng-controller="VideoDiagnosisController" -->

                <form style=" color:#555 !important; padding:10px;"> 
                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTen" aria-expanded="false" aria-controls="collapseTen" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Presenting complain</a>
                            </h6>       <hr class="m-1">
                            <div style="list-style:none" id="collapseTen" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTen">
                                <textarea placeholder="write..." ng-model="treatment.complain" class="form-control" required></textarea>
                            </div>
                        </div>

                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseNine" aria-expanded="false" aria-controls="collapseNine" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">History of presenting complain</a> <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseNine" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingNine">
                                <textarea placeholder="write..." class="form-control" ng-model="treatment.historyOfComplain"></textarea>
                            </div>
                        </div>

                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseEight" aria-expanded="false" aria-controls="collapseEight" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Past medical history</a> <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseEight" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingEight">
                                 <textarea placeholder="write..." class="form-control" ng-model="treatment.pastMedicalHistory"></textarea>
                            </div>
                        </div>
                        
                        <div id="accordion">
                            <h6 style="color: #555 !important; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Family history</a> <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseSeven" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSeven">
                                 <textarea placeholder="write..." class="form-control" ng-model="treatment.familyHistory"></textarea>
                            </div>
                        </div>

                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Social history</a> <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseSix" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix">
                                 <textarea placeholder="write..." class="form-control" ng-model="treatment.socialHistory"></textarea>
                            </div>
                        </div>

                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Drug history</a> <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
                                  <textarea placeholder="write..." class="form-control" ng-model="treatment.drugHistory"></textarea>
                            </div>
                        </div>
                        
                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Summary</a>  <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
                                  <textarea placeholder="write..." class="form-control" ng-model="treatment.summary"></textarea>
                            </div>
                        </div>                       
                        
                         <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapsetwelve" aria-expanded="false" aria-controls="collapseTwelve" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Notes</a>  <hr class="m-1">
                            </h6>                 
                            <div style="list-style:none" id="collapsetwelve" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwelve">
                                  <textarea placeholder="write..." class="form-control" ng-model="treatment.notes" required></textarea>
                            </div>
                        </div>

                        <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree" style=" font-size: 1em; text-transform: uppercase;text-decoration:none;">Provisional diagnosis</a> 
                            </h6>                 
                            <div style="list-style:none" id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
                                  <textarea placeholder="write..." class="form-control" ng-model="treatment.provisionalDiagnosis" required></textarea>
                            </div>
                        </div> 
                        <div>
                            <button class="btn btn-neutral btn-block" ng-class="{'btn-danger': treatment.complain}" ng-click="submitSession()">Save Changes</button>
                        </div>                                                           
                                                                          
                       
                        <!--<div style="margin-top: 10px;">                         

                           
                            
                            <div id="accordion">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" style="color:#306756; font-size: 1em; text-transform: uppercase;text-decoration:none;"><i class="icon-Pills"></i> Pharmaceutical</a>
                            </h6>                 
                            <div style="list-style:none" id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                                   <table>
                                    <tr>
                                        <thead>
                                            <th>S/N</th>
                                            <th>Drug name</th>
                                            <th>Dosage</th>
                                            <th>Frequency</th>
                                            <th>Duration</th>
                                        </thead>
                                    </tr>
                                    <tr>
                                        <tbody ng-repeat="prescription in drugList">                                                                           
                                            <td>{{prescription.sn}}</td>
                                            <td><input name="states" id="states" type="text" placeholder="Enter drug name" class="form-control" ng-model="drug.name" uib-typeahead="drug.name for drug in drugs | filter:$viewValue | limitTo:15" class="form-control" style="width: 95%">
                                                {{getDrug(drug.name)}} </td>
                                            <td><input type="text" ng-model="prescription.dosage" class="form-control" style="padding: 18px 2px"></td>
                                            <td><input type="text" ng-model="prescription.frequency" class="form-control" style="padding: 18px 2px"></td>
                                            <td><input type="text" ng-model="prescription.duration" class="form-control" style="padding: 18px 2px"></td>
                                        </tbody>
                                    </tr>                       
                                </table>
                                <div style="text-align: right">
                                    <i class="fa fa-plus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Add field" ng-click="addDrug()"></i>
                                        <i class="fa fa-minus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Remove last field" ng-click="removeDrug()"></i>
                                </div>
                                <div> 
                                    <button ng-click="toPatient()" class="btn btn-primary">Send to patient</button>
                                    <button ng-click="toPharmacy()" class="btn btn-primary">Send to a Phamarcy</button>
                                </div>
                                <div class="view-animate-container" style="height:auto">
                                    <div class="view-animate" ng-view >
                                    </div>
                                </div>
                            </div>
                            
                        </div>                         

                        <div style="margin-top: 10px;">
                            <h6 style="color: #fff; font-size: 14px;padding:5px">
                                <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" style="color:#306756; font-size: 1em; text-transform: uppercase;text-decoration:none;"><i class="fa fa-calendar"></i> Physical Examination</a>
                            </h6>                 
                            <div style="list-style:none" id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                                <p>Enter date and time of the appointment below</p>
                                <input type="date" ng-model="treatment.appointment.date" class="form-control" style="margin-bottom: 10px">
                                <input type="time" ng-model="treatment.appointment.time" class="form-control" style="margin-bottom: 10px">                              
                                <input type="text" placeholder="Enter address" class="form-control" ng-model="treatment.appointment.address"/>
                                <p>Tips: Enter address of the place of appointment, if none is specified, the place of appointment defaults to the address in your profile.</p>
                                <input type="button" value="Send" ng-click="bookAppointment()" class="btn btn-primary"/>
                            </div>
                        </div>                      
                        
                    </div>-->

                </form>
                <h4 class="mb-0 mt-1" style="text-transform: uppercase; font-size:1em;">Management</h4>
                <div style="word-spacing: 20px">
                    <button class="btn btn-simple" style="margin-top: 10px" ng-class="{'btn-primary': treatment.complain}" ng-click="investigation()">Investigation</button>
                    <button class="btn btn-simple" style="margin-top: 10px" ng-class="{'btn-success': treatment.complain}" ng-click="prescription()">Prescription</button>
                    <button class="btn btn-simple" style="margin-top: 10px" ng-class="{'btn-danger': treatment.complain}" ng-click="appointment()">Appointment</button>
                    <button class="btn btn-simple" style="margin-top: 10px" ng-class="{'btn-primary': treatment.complain}" ng-click="treamentPlan()">Treatment Plan</button>
                </div>
                                             
                        
            </div>
        </section>        
    </main>

    <script type="text/ng-template" id="investigation.html">
        <div class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="border-bottom:1px solid #eee;">
                     <h4>Investigation</h4>
                     <i class="fa fa-times" data-dismiss="modal" style="font-size: 1em; text-transform: uppercase;position: absolute;top:10px;right: 10px;padding: 10px"></i>    
                     <div style="text-align:center;padding:20px" ng-if="isInitial === true">
                        <button class="btn btn-primary" ng-click="lab()">New Laboratory</button>
                        <button class="btn btn-danger" ng-click="radio()">New Radiology</button>  
                     </div>                    
                </div>
            
                <div class="modal-body">
                    <div ng-if="isInitial === true">
                        <div ng-if="isLab">
                             <h4>Lab Investigation <button style="float:right;background-color:orange;color: #fff" class="btn btn-simple" ng-click="getHistory('Lab')">View Lab History</button></h4>
                              <table>
                                <tr>
                                    <thead>
                                        <th></th>
                                        <th>Test Name</th>                                    
                                    </thead>
                                </tr>
                                <tr>
                                    <tbody ng-repeat="lab in TestList">                                                                           
                                        <td style="padding: 5px">{{lab.sn}}</td>
                                        <td><input name="states" id="states" type="text" placeholder="Enter test name" class="form-control" ng-model="test.name" uib-typeahead="test.name for test in tests | filter:$viewValue | limitTo:15" class="form-control" style="width: 95%">
                                            {{getTest(test.name)}} </td>
                                                                          
                                    </tbody>
                                </tr>                       
                            </table>
                            <div style="text-align: right">
                                <i class="fa fa-plus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Add field" ng-click="addTest()"> Add</i>
                                    <i class="fa fa-minus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Remove last field" ng-click="removeTest()"> Remove</i>
                            </div>
                            <div>
                                <div>
                                    <label>Indication:</label>
                                    <textarea  style="width: 80%;height: 120px;" placeholder="Write.." ng-model="treatment.indication" class="form-control pl-2"></textarea>
                                </div>
                                <div>
                                    <label>Clinical Summary:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.clinical_summary" class="form-control pl-2"></textarea>
                                </div>
                                 <div ng-if="patientInfo.gender === 'female'">
                                    <label>LMP:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.lmp" class="form-control pl-2"></textarea>
                                </div>
                                 <div ng-if="patientInfo.gender === 'female'">
                                    <label>Parity:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.parity" class="form-control pl-2"></textarea>
                                </div>
                            </div>

                            <div>
                                <!--<button class="btn btn-success" bg-click="sendToPatient()">to Patient</button>-->
                                <button class="btn btn-success" ng-click="sendToLab()">To Laboratory Center</button>
                            </div>
                         </div> 

                         <div ng-if="isRadio">
                             <h4>Radio Investigation <button style="float:right;background-color:orange;color: #fff" class="btn btn-simple" ng-click="getHistory('Radio')">View Radio History</button></h4>
                             <table>
                                <tr>
                                    <thead>
                                        <th></th>
                                        <th>Test Name</th>                                    
                                    </thead>
                                </tr>
                                <tr>
                                    <tbody ng-repeat="lab in TestList">                                                                           
                                        <td style="padding: 5px">{{lab.sn}}</td>
                                        <td><input name="states" id="states" type="text" placeholder="Enter test name" class="form-control" ng-model="test.name" uib-typeahead="test.name for test in tests | filter:$viewValue | limitTo:15" class="form-control" style="width: 95%">
                                            {{getTest(test.name)}} </td>
                                                                          
                                    </tbody>
                                </tr>                       
                            </table>
                            <div style="text-align: right">
                                <i class="fa fa-plus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Add field" ng-click="addTest()"> Add</i>
                                    <i class="fa fa-minus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Remove last field" ng-click="removeTest()"> Remove</i>
                            </div>
                            <div>
                                <div>
                                    <label>Indication:</label>
                                    <textarea  style="width: 80%;height: 120px;" placeholder="Write.." ng-model="treatment.indication" class="form-control pl-2"></textarea>
                                </div>
                                <div>
                                    <label>Clinical Summary:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.clinical_summary" class="form-control pl-2"></textarea>
                                </div>
                                 <div ng-if="patientInfo.gender === 'female'">
                                    <label>LMP:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.lmp" class="form-control pl-2"></textarea>
                                </div>
                                 <div ng-if="patientInfo.gender === 'female'">
                                    <label>Parity:</label>
                                    <textarea style="width: 80%;height: 120px" placeholder="Write.." ng-model="treatment.parity" class="form-control pl-2"></textarea>
                                </div>
                            </div>

                            <div>
                               <!-- <button class="btn btn-success" bg-click="sendToPatient()">to Patient</button>-->
                                <button class="btn btn-success" ng-click="sendToRad()">To Radiology Center</button>
                            </div>                            
                        </div>

                        <div ng-if="isHistory">
                            <h4>{{arg}} History</h4>
                            <div ng-if="arg === 'Lab'">
                                <div ng-repeat="item in patientMedicalRecord.medical_records.laboratory_test">                                  
                                  <table class="table">                                                                     
                                      <thead style="background-color: orange; color:#fff">
                                          <th>Test name</th>
                                          <th>{{item.sent_date | date: "mediumDate"}}</th>
                                      </thead>
                                      <tbody>
                                          <td style="width:40%">
                                              <ol>
                                                  <li ng-repeat="test in item.test_to_run">{{test.name}}</li>
                                              </ol>
                                          </td>
                                          <td style="width:60%">
                                              <div>
                                                  <label><b>Reports: </b> </label> <span ng-class="{'text-danger': item.report === 'Pending'}">{{item.report}}</span>
                                              </div>
                                              <div>
                                                  <label><b>Conclusion: </b> </label> <span <span ng-class="{'text-danger': item.report === 'Pending'}">{{item.conclusion}}</span>
                                              </div>
                                              <footer>
                                                  <header><small>{{item.center_name}}</small></header>
                                                  <address><small>{{item.center_address}} {{item.center_city}} {{item.center_country}}</small></address>
                                              </footer>                                      
                                              
                                          </td>
                                      </tbody>
                                  </table>
                                </div>
                                <p ng-if="patientMedicalRecord.medical_records.laboratory_test.length === 0" style="text-align:center">No Record Found!</p>                               
                            </div>
                            <div ng-if="arg === 'Radio'">
                                <div ng-repeat="item in patientMedicalRecord.medical_records.radiology_test">                                  
                                  <table class="table">                                                                     
                                      <thead style="background-color: orange; color:#fff">
                                          <th>Test name</th>
                                          <th>{{item.sent_date | date: "mediumDate"}}</th>
                                      </thead>
                                      <tbody>
                                          <td style="width:40%">
                                              <ol>
                                                  <li ng-repeat="test in item.test_to_run">{{test.name}}</li>
                                              </ol>
                                          </td>
                                          <td style="width:60%">
                                              <div>
                                                  <label><b>Reports: </b> </label> <span ng-class="{'text-danger': item.report === 'Pending'}">{{item.report}}</span>
                                              </div>
                                              <div>
                                                  <label><b>Conclusion: </b> </label> <span <span ng-class="{'text-danger': item.report === 'Pending'}">{{item.conclusion}}</span>
                                              </div>
                                              <footer>
                                                  <header><small>{{item.center_name}}</small></header>
                                                  <address><small>{{item.center_address}} {{item.center_city}} {{item.center_country}}</small></address>
                                              </footer>                                      
                                              
                                          </td>
                                      </tbody>
                                  </table>
                                </div>
                                <p ng-if="patientMedicalRecord.medical_records.laboratory_test.length === 0" style="text-align:center">No Record Found!</p>                      
                            </div>
                        </div>
                     </div>

                    <div ng-if="isSearchToSend === true">
                        <a href="" ng-click="goBack()"><i class="fa fa-arrow-left"></i> Back</a> 
                        <div>
                           <form>
                               <label>Criteria: </label>
                               <input type="text" name="city" ng-model="treatment.city">
                               <input type="text" name="country" ng-model="treatment.country">
                               <input type="button" ng-click="changeOption()" class="btn btn-primary" value="search">
                           </form>
                           <hr>
                           <div class="row">
                            <div class="col-sm-12 col-md-7">
                                <div>
                                    <input type="text" name="" ng-model="filterResult" placeholder="Filter centers" class="form-control">
                               </div>
                               <div style="overflow-y: auto; height: 400px">
                                   <div ng-repeat="center in searchResult | filter: filterResult" style="padding:10px">
                                       <a href="" ng-click="selected(center)">{{center.name}}<span style="display: block">{{center.address}},{{center.city}},{{center.country}}</span></a>
                                   </div>                               
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-5" style="padding: 2px">
                                <h5 style="background-color: rgba(0,0,0,0.5);color:#fff;padding: 3px 7px 5px">Selection Info</h5>
                                
                                <p>{{pickedCenter.name}}</p>
                                <p>{{pickedCenter.address}} {{pickedCenter.city}} {{pickedCenter.country}}</p>
                                <p>{{pickedCenter.phone}}</p>
                                <h5 style="padding: 7px;background-color: rgba(0,0,0,0.5);color: #fff">Stock info <b class="updateInfo" ng-class="{'text-danger': status === 'Not Updated!'}">{{status}}</b></h5>
                                
                                <ol ng-repeat="d in TestList" style="list-style: none">
                                    <li ng-class="{'notAvail': d.available === false}">{{d.name}} &nbsp;<span style="font-size: 8px" ng-if="d.available === true">available</span></li>
                                </ol>
                                <div style="padding: 20px;text-align: center;">
                                    <button class="btn btn-success form-control" ng-click="sendTest()" ng-if="pickedCenter">{{(message) ? message : 'send'}}</button>
                                </div>
                            </div>                               
                           </div>                           
                       </div>
                    </div>                     
                </div>          
            </div>
          </div>
        </div>
     </script>
     <script type="text/ng-template" id="treatment-plan.html">
        <div class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="border-bottom:1px solid #eee;">
                     <h4>Treatment Plan</h4>
                     <i class="fa fa-times" data-dismiss="modal" style="font-size: 1em; text-transform: uppercase;position: absolute;top:10px;right: 10px;padding: 10px"></i>                       
                </div>
            
                <div class="modal-body">
                    <form>
                        <div>
                            <textarea class="form-control" placeholder="Write" ng-model="treatment.treatmentPlan" style="height: 400px"></textarea>
                        </div>
                        <div style="padding-top: 20px" ng-if="treatment.treatmentPlan">
                            <button class="btn btn-primary" ng-click="submitPlan()">{{(message) ? message : "Save"}}</button>
                        </div>
                    </form>                   
                </div>          
            </div>
          </div>
        </div>
     </script>
     <script type="text/ng-template" id="prescription.html">
        <div class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="border-bottom:1px solid #eee;position: relative;">
                      <h4> Pharmaceutical <button style="float:right;margin-top: 30px" class="btn btn-danger" ng-click="getHistory()">{{(isHistory === true) ? 'Write New' : 'View History'}}</button></h4>
                      <i class="fa fa-times" data-dismiss="modal" style="font-size: 1em; text-transform: uppercase;position: absolute;top:10px;right: 10px;padding: 10px"></i>             
                </div>
            
                <div class="modal-body">
                   <div ng-if="isInitial === true">                                                       
                           <table>
                            <tr>
                                <thead>
                                    <th></th>
                                    <th>Drug name</th>
                                    <th>Dosage</th>
                                    <th>Frequency</th>
                                    <th>Duration</th>
                                </thead>
                            </tr>
                            <tr>
                                <tbody ng-repeat="prescription in drugList">                                                                           
                                    <td style="padding: 5px">{{prescription.sn}}</td>
                                    <td><input name="states" id="states" type="text" placeholder="Enter drug name" class="form-control" ng-model="drug.name" uib-typeahead="drug.name for drug in drugs | filter:$viewValue | limitTo:15" class="form-control" style="width: 95%">
                                        {{getDrug(drug.name)}} </td>
                                    <td><input type="text" ng-model="prescription.dosage" class="form-control" style="padding: 18px 2px"></td>
                                    <td><input type="text" ng-model="prescription.frequency" class="form-control" style="padding: 18px 2px"></td>
                                    <td><input type="text" ng-model="prescription.duration" class="form-control" style="padding: 18px 2px"></td>
                                </tbody>
                            </tr>                       
                        </table>
                        <div style="text-align: right">
                            <i class="fa fa-plus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Add field" ng-click="addDrug()"> Add</i>
                                <i class="fa fa-minus" style="font-size:16px;color:green;padding: 10px; cursor:pointer; margin-right: 5px" title="Remove last field" ng-click="removeDrug()"> Remove</i>
                        </div>
                        <div> 
                            <button ng-click="toPatient()" class="btn btn-success">Send to patient</button>
                            <button ng-click="toPharmacy()" class="btn btn-success">Send to a Phamarcy</button>
                        </div>
                        
                    </div>
                    <div ng-if="isHistory === true">
                        <!--<div>
                            <button style="float:right;background-color:orange;color: #fff" class="btn btn-simple" ng-click="newPrescription()">New Prescription</button>
                        </div>-->
                        <div ng-repeat="item in patientMedicalRecord" style="margin-bottom: : 40px,border-bottom:2px solid grey">
                        <div>
                            <label><b>Date: </b> </label> <span>{{item.date | date: "mediumDate"}}</span>&nbsp;&nbsp;&nbsp;
                            <label><b>Provisoinal Daignosis: </b> </label> <span>{{item.provisonal_diagnosis}}</span>
                        </div>                                  
                          <table class="table">                                                                     
                              <thead style="">
                                  <th>sn</th>
                                  <th>drug</th>
                                  <th>dosage</th>
                                  <th>frequency</th>
                                  <th>duration</th>
                              </thead>
                              <tbody ng-repeat="drug in item.prescription_body">
                                  <td>{{drug.sn}}</td>
                                  <td>{{drug.drug_name}}</td>
                                  <td>{{drug.dosage}}</td> 
                                  <td>{{drug.frequency}}</td> 
                                  <td>{{drug.duration}}</td>  
                              </tbody>
                          </table>
                          <div style="text-align: right;border-bottom: 2px solid grey;
                          padding-bottom: 20px;margin-bottom: 20px">
                              <small>{{item.title}} {{item.doctor_firstname}} {{item.doctor_lastname}} 
                              <span style="display: block;">{{item.doctor_specialty}}</span>
                              <span style="display: block;">{{item.doctor_work_place}} {{item.doctor_city}} {{item.doctor_country}}</span>                                    
                              </small>
                          </div>
                        </div>
                        <p ng-if="patientMedicalRecord.medical_records.laboratory_test.length === 0" style="text-align:center">No Record Found!</p>                      
                    </div>

                    <div ng-if="isSearchToSend === true">
                       <a href="" ng-click="goBack()"><i class="fa fa-arrow-left"></i> Back</a> 
                       <div>
                           <form>
                               <label>Criteria: </label>
                               <input type="text" name="city" ng-model="treatment.city">
                               <input type="text" name="country" ng-model="treatment.country">
                               <input type="button" ng-click="changeOption()" class="btn btn-primary" value="search">
                           </form>
                           <hr>
                           <div class="row">
                            <div class="col-sm-12 col-md-7">
                                <div>
                                    <input type="text" name="" ng-model="filterResult" placeholder="Filter centers" class="form-control">
                               </div>
                               <div style="overflow-y: auto; height: 400px">
                                   <div ng-repeat="center in searchResult | filter: filterResult" style="padding:10px">
                                       <a href="" ng-click="selected(center)">{{center.name}}<span style="display: block">{{center.address}},{{center.city}},{{center.country}}</span></a>
                                   </div>                               
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-5" style="padding: 2px">
                                <h5 style="background-color: rgba(0,0,0,0.5);color:#fff;padding: 3px 7px 5px">Selection Info</h5>
                                
                                <p>{{pickedCenter.name}}</p>
                                <p>{{pickedCenter.address}} {{pickedCenter.city}} {{pickedCenter.country}}</p>
                                <p>{{pickedCenter.phone}}</p>
                                <h5 style="padding: 7px;background-color: rgba(0,0,0,0.5);color: #fff">Stock info <b class="updateInfo" ng-class="{'text-danger': status === 'Not Updated!'}">{{status}}</b></h5>
                                
                                <ol ng-repeat="d in drugList" style="list-style: none">
                                    <li ng-class="{'notAvail': d.available === false}">{{d.drug_name}} &nbsp;<span style="font-size: 8px" ng-if="d.available === true">available</span></li>
                                </ol>
                                <div style="padding: 20px;text-align: center;">
                                    <button class="btn btn-success form-control" ng-click="sendDrug()" ng-if="pickedCenter">{{(message) ? message : 'send'}}</button>
                                </div>
                            </div>
                               
                           </div>
                           
                       </div>
                    </div>

                </div>          
            </div>
          </div>
        </div>
     </script>
     <script type="text/ng-template" id="calender-template.html">
        <div class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header" style="border-bottom:1px solid #eee;">
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                <div>
                <b>Book an Appointment</b>
                <!--<button type="button"  ng-click="close('Cancel')" data-dismiss="modal" aria-hidden="true" style="color:red;font-size: 32px; margin-top:-9px;float:right; top:5px;border:none">&times;</button>-->
                <i class="fa fa-times" data-dismiss="modal" style="color:red;font-size: 22px; margin-top:-9px;float:right; top:5px;border:none"></i>
                </div>  
                    
                </div> </div>                                    
              </div>
            
                    <div class="modal-body">
                    <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                                              
                        <div class="calender-header bg-primary">
                            <i class="fa fa-angle-left" ng-click="previous()"></i>
                            <span>{{month.format("MMMM, YYYY")}}</span>
                            <i class="fa fa-angle-right" ng-click="next()"></i>
                        </div>
                        <div class="week">
                            <span class="day">Sun</span>
                            <span class="day">Mon</span>
                            <span class="day">Tue</span>
                            <span class="day">Wed</span>
                            <span class="day">Thu</span>
                            <span class="day">Fri</span>
                            <span class="day">Sat</span>
                        </div>
                        
                        <div ng-repeat="week in weeks" class="indays">
                            <span class="dates" ng-class="{ today: day.isToday, 'different-month': !day.isCurrentMonth, selected: day.date.isSame(selected) }" ng-click="select(day)" style="cursor:pointer" ng-repeat="day in week.days">{{day.number}}</span>
                        </div>                        
                        <p class="bg-default" style="font-size:1em; padding:15px;">Picked Date: <em>{{dd.format('dddd, MMMM Do YYYY')}}</em><span style="display:block">Picked time: <em>{{treatment.appointment.time | date: "mediumTime"}} </em></span>
                            <span>Picked Venue: <em>{{treatment.appointment.address}} </em></span>
                        </p>

                        <div>
                        <b style="font-size:1.4em; font-weight:bold;">Time of appointment: <br><input type="time" class="form-control" placeholder="Enter time" ng-model="treatment.appointment.time" style="font-size:.5em;"/></b>
                        <div style="font-size:1.3em;"><b>Venue</b> <sub>(If none,defaults to the address in your profile)</sub>: <br><input class="form-control" type="address" placeholder="Enter address" ng-model="treatment.appointment.address"></div>
                     </div>  </div> 
                        <div class="clearfix"></div>
                       
                </div>

                <div class="modal-footer ok">
                            <button  style="font-size:1.4em; font-weight:300; width:50%;" ng-click="book()" class="btn btn-danger">{{(message) ? message : 'Book'}}</button>
                        </div>
              </div>          
            </div>
          </div>
        </div>
     </script>    
    <script src="/assets/js/ui-bootstrap-tpls.js"></script>
    <script src="/assets/js/modalService.js"></script>



          <!-- plug ins -->
        <!--   Core JS Files   -->
        <script src="assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
        <script src="assets/js/core/tether.min.js" type="text/javascript"></script>
        <script src="assets/js/core/bootstrap.min.js" type="text/javascript"></script>
        <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
        <script src="assets/js/plugins/bootstrap-switch.js"></script>
        <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
        <script src="assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
        <!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
        <script src="assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
        <!-- Control Center for Now Ui Kit: parallax effects, scripts for the example pages etc -->
        <script src="assets/js/now-ui-kit.js" type="text/javascript"></script>
        

</body>
</html>

