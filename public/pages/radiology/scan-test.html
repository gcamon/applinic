

<!--<div class="pl-0 card-center-1">
	<div class="col-md-8 pl-0">
			<input type="text" name="" placeholder="Filter by test name, center name, date sent, date received, etc" ng-model="filterResult" class="form-control">
	</div>
</div>-->
<div class="pl-0 card-center-1 card" style="position: relative;">
	    <h5 style="padding:15px;" class="h6">Radiology Reports</h5>   
	    <div style="position: absolute;right: 15px;top:5px">
	      <input type="text" name="" placeholder="Filter by test name, center name, date sent, date received, etc" ng-model="filterResult" class="form-control">
	    </div>
</div>
<div ng-if="!isViewSingle">
<section class="card card-center-1 mb-1" ng-repeat="test in labTest | filter : filterResult | orderBy: '-sent_date'" id="{{test.ref_id}}" ng-if="test.conclusion !== 'Pending'">		
	<div class="p-1">
			<!--<div style="text-align: center;">	
			
			<h5><b>{{test.center_name}}</b></h5>
           
            <i class="fa fa-globe"></i>{{test.center_address}} {{test.center_city}} {{test.center_country}}<br>
           	
            <i class="fa fa-phone"></i> {{test.center_phone}}<br>        
            <a href="{{test.center_profile_url}}" title="view profile" ng-if="test.center_profile_url">View profile</a>
            </div>-->

            <div  style="position: relative;padding-top: 10px">
	            <button class="collapsed dropdown-toggle btn btn-simple" role="button" data-toggle="collapse" data-parent="#accordion" href="#{{'test' + test.ref_id + test.test_id}}" aria-expanded="false" aria-controls="collapsefifty">View Details</button>
	            <span am-time-Ago="test.sent_date" style="position: absolute;top:20px;right: 20px"></span>
	        </div>
			<hr>
			<div style="line-height: 25px;margin-bottom:5px" id="{{'test' + test.ref_id + test.test_id}}" class="panel-collapse collapse p-1" role="tabpanel" aria-labelledby="headingfifty">
	              <strong>Center Name: </strong> <span>{{test.center_name}}</span><br>

	              <strong>Center Address: </strong> <span>{{test.center_address}} {{test.center_city}} {{test.center_country}}</span><br>
	              <strong>Center Phone: </strong> <span>{{test.center_phone}}</span><br>

	              <strong>Referred by:</strong>  <span>{{test.referral_title}} {{test.referral_lastname}} {{test.referral_firstname || "Not specified"}}</span><br>

	              <strong>Reference Number:</strong> : <span>{{(test.copy) ? "Copied!" : test.ref_id}}</span> <a href="" clipboard supported="supported" text="test.ref_id" on-copied="success(test)" on-error="fail(err)" title="{{copy}}" class="fa fa-copy text-danger" style="padding: 5px"> Copy</a><br>

	              <strong>Date requested:</strong> <span>{{test.sent_date | date : "mediumDate"}} ( <span am-time-Ago="test.sent_date" ng-if="test.sent_date"></span> )</span>

	              <span ng-if="test.conclusion === 'Pending'"><strong>Status: </strong> <span style="color: red">Awaiting test result</span></span><br>
	            <!--<p><strong>Date sent: </strong>{{test.sent_date | date : "mediumDate"}} &nbsp; <strong>Time: </strong>{{test.sent_date | date : "shortTime"}}</p>-->
	            <strong>Date received: </strong> {{test.receive_date | date: "mediumDate" || "Pending"}} <span am-time-Ago="test.receive_date" ng-if="test.receive_date"></span><br>


	            <strong>Indication: </strong> <span>{{test.indication}}</span>
	              
	            
	        </div>
	        <br>
			<div>
	            <h6>Test(s) requested:</h6>
	            <br>
	            <ol style="line-height: 25px">
	              <li ng-repeat="ranTest in test.test_to_run">
	                <label class="custom-control custom-checkbox">
	                    <input type="checkbox" class="custom-control-input" ng-model= "ranTest.picked" >
	                    <span class="custom-control-indicator"></span>
	                    <span class="custom-control-description">{{ranTest.name}}</span>
	                </label>               
	              </li>                     
	            </ol>

	        </div> 
	        <br> 
    		<div ng-show="test.conclusion == 'Pending'">
	            <h6>Test Report: </h6>
	            <p> No report received at this time</p>
	        </div>
	        <div ng-show="test.conclusion !== 'Pending'">
	        	<h6>Findings:</h6>
	        </div>      	
	</div>		

	<div class="p-1"> 			
		<!--<h6 style="text-decoration: underline;padding: 0px 0px 10px">Investigation Report</h6>
		<div><strong>Test ran:</strong> 
			<ol style="background-color: #d7dde4;line-height: 25px">
				<li ng-repeat="ranTest in test.test_to_run">
					<span style="display: inline-block;width: 80%">{{ranTest.name}}</span>
					<label class="custom-control custom-checkbox" style="">
					   	<input type="checkbox" class="" ng-model= "ranTest.picked" >
					  	<span class="custom-control-indicator"></span>
					  	<span class="custom-control-description" style="opacity:0;"></span>
					</label>
				</li>							
			</ol>
		</div>-->
		
		<div ng-if="test.conclusion !== 'Pending'" class="patient-tests">
			<article ng-repeat = "testRan in test.report">
				<div ng-if="testRan.report_sheet" class="pl-0">
					<div><strong>{{testRan.name}}:</strong></div>
					<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{testRan.report_sheet}}</em></p>	
				</div>	    					
			
				<div ng-if="!testRan.report_sheet" class="pl-0">
					<article ng-repeat = "testRan2 in test.test_to_run">
					<div><strong>{{testRan2.name}}:</strong></div>
					<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{testRan2.data}}</em></p>
					</article>
				</div>		  
			</article>
			<div><strong>Conclusion:</strong></div>
			<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{test.conclusion}}</em></p>
			<p style="padding: 10px;text-align: right;font-size: 16px;color: blue;text-decoration: underline;" ng-if="test.files.length > 0"><a href="" ng-click="viewFile(test)"> {{test.files.length}}  file(s) attached</a></p>	  				
		</div>
		


		<div class="row">
			<div class="col-sm-12 col-md-12 col-lg-12" style="padding: 10px 15px 0;position: relative;text-align: right;">
				<div>  
					<i class="fa fa-user-md btn btn-neutral" aria-hidden="true" style="font-size: 18px;margin-right:15p;cursor:pointer;padding: 5px 15px" title="Prescription request by test result" ng-click="sendDocTest(test)" ng-if="test.conclusion !== 'Pending'"></i>
					<i class="fa fa-user-md btn btn-neutral" aria-hidden="true" style="color:#ccc;font-size: 18px;cursor:pointer;padding: 5px 15px" title="Prescription request by test result"  ng-if="test.conclusion === 'Pending'"></i>  						
    				<!--<i ng-print  print-element-id="{{test.ref_id}}" class="fa fa-print btn btn-danger" aria-hidden="true" style="font-size: 18px;margin-right:15p;cursor:pointer;padding: 5px 15px" title="Print this radio investigation"></i>-->
    				<i class="fa fa-share btn btn-neutral" aria-hidden="true" style="font-size:18px;margin-right:20p;cursor:pointer;padding: 5px 15px" title="Forward this investigation to another center" ng-click="forwardTest(test,'Radiology')"></i>
    				
				</div>
			</div>
					
		</div>
    				
    	
	</div>

</section>
</div>
<div ng-if="isViewSingle">
<section  class="card card-center-1 mb-1" ng-repeat="test in labTest | filter : filterResult | orderBy: '-sent_date'" id="{{test.ref_id}}">		
	<div class="p-1">
			<div style="text-align: center;">	
			<!--<img src="{{test.center_profile_pic}}" style="max-width:72px; max-height:72px" ng-if="test.center_profile_pic">-->
			<h5><b>{{test.center_name}}</b></h5>
           
            <i class="fa fa-globe"></i>{{test.center_address}} {{test.center_city}} {{test.center_country}}<br>
           	
            <i class="fa fa-phone"></i> {{test.center_phone}}<br>        
            <a href="{{test.center_profile_url}}" title="view profile" ng-if="test.center_profile_url">View profile</a>
            </div>
		
			<hr>
			<div style="line-height: 25px;margin-bottom: 5px">
	    		<h6 style="">Investigation details:</h6><br>
	    		<strong>Referred by:</strong>  <span>{{test.referral_title}} {{test.referral_lastname}} {{test.referral_firstname}}</span><br>
	    		<strong>Reference Number:</strong> : <span>{{(test.copy) ? "Copied!" : test.ref_id}}</span> <a href="" clipboard supported="supported" text="test.ref_id" on-copied="success(test)" on-error="fail(err)" title="{{copy}}" class="fa fa-copy text-danger" style="padding: 5px"> Copy</a><br>

    			<strong>Date requested:</strong> : <span>{{test.sent_date | date : "mediumDate"}} ( <span am-time-Ago="test.sent_date" ng-if="test.sent_date"></span> )</span>

    			<span ng-if="test.conclusion === 'Pending'"><strong>Status: </strong> <span style="color: red">Awaiting test result</span></span><br>
				<!--<p><strong>Date sent: </strong>{{test.sent_date | date : "mediumDate"}} &nbsp; <strong>Time: </strong>{{test.sent_date | date : "shortTime"}}</p>-->
				<strong>Date received: </strong> {{test.receive_date | date: "mediumDate" || "Pending"}} ( <span am-time-Ago="test.receive_date" ng-if="test.receive_date"></span>)<br>


				<strong>Indication: </strong> <span>{{test.indication}}</span>
					
				
			</div>
			<div>

				<h6>Test(s) requested:</h6>
				<ol style="background-color: #d7dde4;line-height: 25px">
					<li ng-repeat="ranTest in test.test_to_run">
						<span style="display: inline-block;width: 80%">{{ranTest.name}}</span>
						<label class="custom-control custom-checkbox" style="">
						   	<input type="checkbox" class="" ng-model= "ranTest.picked" >
						  	<span class="custom-control-indicator"></span>
						  	<span class="custom-control-description" style="opacity:0;"></span>
						</label>
					</li>											
				</ol>

			</div>				
    			
	</div>		

	<div class="p-1"> 				
			<div> 
				<!--<h6 style="text-decoration: underline;padding: 0px 0px 10px">Investigation Report</h6>
    			<div><strong>Test ran:</strong> 
					<ol style="background-color: #d7dde4;line-height: 25px">
						<li ng-repeat="ranTest in test.test_to_run">
							<span style="display: inline-block;width: 80%">{{ranTest.name}}</span>
							<label class="custom-control custom-checkbox" style="">
							   	<input type="checkbox" class="" ng-model= "ranTest.picked" >
							  	<span class="custom-control-indicator"></span>
							  	<span class="custom-control-description" style="opacity:0;"></span>
							</label>
						</li>							
					</ol>
				</div>-->

    			<h6 class="pl-2">Findings:</h6>
				<div ng-if="test.conclusion !== 'Pending'" class="patient-tests">
					<article ng-repeat = "testRan in test.report">
						<div ng-if="testRan.report_sheet" class="pl-0">
							<div><strong>{{testRan.name}}:</strong></div>
							<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{testRan.report_sheet}}</em></p>	
						</div>	    					
					
						<div ng-if="!testRan.report_sheet" class="pl-0">
							<article ng-repeat = "testRan2 in test.test_to_run">
							<div><strong>{{testRan2.name}}:</strong></div>
							<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{testRan2.data}}</em></p>
							</article>
						</div>		  
					</article>
					<div><strong>Conclusion:</strong></div>
					<p style="background-color: lightYellow;font-size: 16px;padding: 15px"><em>{{test.conclusion}}</em></p>
					<p style="padding: 10px;text-align: right;font-size: 16px;color: blue;text-decoration: underline;" ng-if="test.files.length > 0"><a href="" ng-click="viewFile(test)"> {{test.files.length}}  file(s) attached</a></p>	  				
				</div>
    			<!--<ul ng-i="test.report !== 'Pending'" style="list-style: none;">							
					<li>								
						<li ng-repeat = "testRan in test.test_to_run"><strong>{{testRan.name}} : ccvvcvcvc</strong> <em>{{testRan.data}}</em></li>								
					</li>
					<li><strong>Conclusion : </strong> <em>{{test.conclusion}}dffdfddffdfdfdfddffdfd</em></li>
				</ul>-->
				<p ng-if="test.report == 'Pending'" style="text-align: center;font-size: 12px;padding: 40px"> No report received at this time</p>


				<div class="row">
    				<div class="col-sm-12 col-md-12 col-lg-12" style="padding: 10px 15px 0;position: relative;text-align: right;">
    					<div>  
    						<i class="fa fa-user-md btn btn-info" aria-hidden="true" style="font-size: 18px;margin-right:15p;cursor:pointer;padding: 5px 15px" title="Prescription request by test result" ng-click="sendDocTest(test)" ng-if="test.conclusion !== 'Pending'"></i>
							<i class="fa fa-user-md btn btn-simple" aria-hidden="true" style="color:#ccc;font-size: 18px;margin-right:15p;cursor:pointer;padding: 5px 15px" title="Prescription request by test result"  ng-if="test.conclusion === 'Pending'"></i>  						
		    				<!--<i ng-print  print-element-id="{{test.ref_id}}" class="fa fa-print btn btn-danger" aria-hidden="true" style="font-size: 18px;margin-right:15p;cursor:pointer;padding: 5px 15px" title="Print this radio investigation"></i>-->
		    				<i class="fa fa-share btn btn-success" aria-hidden="true" style="font-size:18px;margin-right:20p;cursor:pointer;padding: 5px 15px" title="Forward this investigation to another center" ng-click="forwardTest(test,'Radiology')"></i>
		    				
	    				</div>
    				</div>
    						
    			</div>
    		</div>  		
    	
	</div>

</section>
</div>
<div style="height: 300px"></div>
	
		
		
	
		
		